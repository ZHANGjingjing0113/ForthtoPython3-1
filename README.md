*
*forth | stack | neum |  hw |  tick | struct  |  trap | mem |  pstr | prob5 | spi

## forth программирование дизайн
* Сами инструкции не чувствительны к регистру, за исключением объявлений символов.Например ld #1 равно LD #1
* Первая функция _start，Это ввод.
* Инструкции выполняются последовательно. Действие инструкции объясняется следующим образом:

  - `ld параметр` -- Загрузка – это загрузка данных из памяти в регистр.

  - `st параметр` -- Удалить - выгрузить значение из регистра в память

  - `add параметр` -- Добавляет указанное значение в регистр

  - `sub параметр` -- Удаляет указанное значение из реестра

  - `mul параметр` -- Умножить регистр на указанное значение

  - `div параметр` -- Делит регистр на указанное

  - `cmp параметр` -- Сравнивает значение регистра с указанным значением и устанавливает значение состояния.

  - `jmp параметр` -- Безоговорочно переходит к целевому адресу, указанному инструкцией, и начинает выполнение с этого адреса. Целевой адрес может быть получен непосредственно из инструкции или из регистра или памяти, указанных в инструкции.

  - `jz параметр` -- Простая инструкция условного перевода – передача равенства

  - `js параметр` -- Одна инструкция условной передачи — результат передачи предыдущей операции представляет собой отрицательное число.
  - `jnz параметр` -- Простая инструкция условной передачи — неравная передача (такая же, как в JNE)
  
  - `hlt` -- Инструкция переводит процессор в остановленное состояние.
  
  - `push` -- Вставьте в стек. Поместите слово данных из регистра или регистра сегмента в стек.
  
  - `pop` --  Выйдите из стека. Поместить верхний элемент стека в регистр
  - `call  параметр` -- программный вызов
  
  - `ret` -- возвращаться
  
  - `inv` -- Получить обратную величину регистрационного номера
  
* Содержимое после точки с запятой будет рассматриваться как комментарий.

* Кодировка символов поддерживается. Символы хранятся в памяти в виде чисел:

```

' ':0, 'a':1, 'b':2, 'c':3, 'd':4, 'e':5, 'f':6, 'g':7, 'h':8, 'i':9, 'j':10,
'k':11, 'l':12, 'm':13, 'n':14, 'o':15, 'p':16, 'q':17, 'r':18, 's':19, 't':20, 'u':21,'v':22, 'w':23, 'x':24, 'y':25, 'z':26, 'A':27, 'B':28, 'C':29, 'D':30, 'E':31, 'F':32,'G':33, 'H':34, 'I':35, 'J':36, 'K':37, 'L':38, 'M':39, 'N':40, 'O':41, 'P':42, 'Q':43,'R':44, 'S':45, 'T':46, 'U':47, 'V':48, 'W':49, 'X':50, 'Y':51, 'Z':52, '':53, '0':54,'1':55, '2':56, '3':57, '4':58, '5':59, '6':60, '7':61, '8':62, '9':63, '!':64, ',':65,'.':66, '-':67, '*':68, '?':69, '+':70, '/':71, '@':72, '\0':73, '\n':74

```

* Контрольная этикетка:

 - 'section .data' - Метка, указывающая начало диапазона данных. После этого вы сможете объявлять переменные, но не писать код.
 - 'section .text' - Тег, обозначающий начало кода

* Функции и метки:

  * Функция определяется следующим образом: '<имя функции>''
  * Давайте определим тег следующим образом: '.<именованный тег>:'

  Разница между функциями и метками заключается в том, что метки начинаются с "." Когда мы хотим перейти к определенному тегу, нам нужно использовать его следующим образом:
    jmp .label_name

* Поиск адреса (формат параметра）:

  * Чистые числа: если аргумент является числом, он рассматривается как адрес. То есть ld 29 - означает загрузку значения 30-й ячейки в аккумулятор 
  * Просто значение: если параметр имеет знак «#», за которым следует число, параметр рассматривается как значение. т.е. ld #29 - загрузить 29 в батарею
  * Переменная: если аргументом является переменная, определенная в разделе данных, то адрес рассматривается как переменная.
  * Символ: Закодирован в числа в соответствии с таблицей символов. Например,ld 'A' = ld #27

*Определение значения статуса:

  * True = 1
  * Flase = 0

* Определения переменных:

  * Оно определяется как: "<Имя: Значение>". Значение может быть числом или строкой. Если это строка, в ней будет столько ячеек, сколько символов.
## Память

память команд и данных.

Память — это список ячеек. Ячейки реализуются классом Cell.

* Или число – то есть данные. Машинные биты - 32 бита. **Ячейка содержит только один символ. Этот символ также принимает форму числа в соответствии с таблицей символов, определенной в ISA.**
*или инструкции, выраженные в виде классов - Instruction。**в объекте класса，instruction Тип и параметры инструкции сохранения**

Дизайн стека.

Последняя часть **1/4** — это порт ввода-вывода, он используется только для ввода-вывода.

### субординация

* Машинные биты -- 32 бита.
* регистр:

  * IP-счетчик
    * общаться-
      * регистр
      * Одолжить со стеком
      * сохранять результаты любой функции
      * Сохраняйте результаты любой математической операции
    * BR - Служит буфером для временного хранения данных. Например, он используется для сохранения результата функции в инструкции ret.。
    * AR — назначенный адрес устройства, с которым они взаимодействуют, то есть регистра. Все еще говоришь «Адрес» стека。
    * PS - код состояния.
    * SP - указатель стека。

## кодирование инструкций

Машинный код хранится в формате CSV.

Вся программа разделена на 4 части. отличающиеся указанными тегами,

- Первая часть инструкций, которой предшествует тег FUNCTION, представляет собой набор команд. Каждая строка содержания инструкции разделена на три столбца со знаком " ":
   - Первый столбец - это индекс инструкции.
   - Второй столбец - инструкции
   - Параметры третьего столбца (если есть)
- Вторая часть — это функция. Содержимое после FUNCTION и перед LABEL — это выполняемая функция. Каждая строка содержимого функции разделена на два столбца со знаком «:»:
   - Первый столбец - это имя
   - Второй столбец - индекс инструкции
- Третья часть — это метка. Содержимое после LABEL и перед VARIABLE — это метка. Каждая строка содержимого метки разделена на три столбца со знаком «:»:
   - Первый столбец - это имя функции
   - Второй столбец — название ярлыка.
   -Третий столбец — индекс инструкций.
- Четвертая часть — это переменная, а содержимое после тега VARIABLE — это переменная. Переменные разделены на три столбца со знаком «:»:
   - Первый столбец — это имя переменной
   - Второй столбец - значение
   - Третий столбец - длина строки (если есть)

пример:
```
0 LD 'H' 
1 ST OUTPUT 
2 LD 'e' 
3 ST OUTPUT 
4 LD 'l' 
5 ST OUTPUT 
6 LD 'l' 
7 ST OUTPUT 
8 LD 'o' 
9 ST OUTPUT 
10 LD ',' 
11 ST OUTPUT 
12 LD 'w' 
13 ST OUTPUT 
14 LD 'o' 
15 ST OUTPUT 
16 LD 'r' 
17 ST OUTPUT 
18 LD 'l' 
19 ST OUTPUT 
20 LD 'd' 
21 ST OUTPUT 
22 HLT 
FUNCTION
_START:0
LABEL
_START:.LOOP:0
VARIABLE

```


## Переводчик

Выполнение заказа: `python Forth_Like_Compiler_CLI.py"`

Поддержка определения основных ошибок:

* Невозможно определить две переменные с одинаковым именем.
* Не используйте «Вход» или «Выход» в качестве имен переменных.
* Проверьте, правильно ли пользователь определил параметры. Например, вы можете определить параметры для директивы, у которой нет параметров.
* Проверьте формат переменной.
* В сообщении об ошибке будет указано место возникновения ошибки.

Возможности переводчика:

1. Проверьте некоторые этикетки. данные
2. Считайте переменные и сохраните их в
3. Проверьте некоторые этикетки
4. Прочтите код
    * Если строка является меткой, сохраняется ее положение, включая функцию и имя на кириллице label_in_fun.
    * Если строка является функцией, она сохраняет свою позицию и имя в function_point.
    * Если строка является директивой, сохраните ее позицию, тип и аргументы в результирующей строке.
5. Когда читает строку, автоматически игнорирует комментарии
6. Директива преобразуется в верхний регистр перед выполнением какой-либо обработки цифр 1–4.
7. Сгенерируйте выходные файлы на основе результатов, переменных, label_in_fun и function_point.

## компьютерное моделирование

Выполнение заказа: `python Enhanced_Machine.py".`

процессор:

* Операции над одним и тем же объектом выполняются не за один такт.
* Выполнение операций над разными объектами в одном цикле.

Реализация алгоритма:
* if,loop  : /Enhanced_ISA.py
* I/O      : /Enhanced_Machine_IO.py


## Ручное тестирование:

* Тестирование компилятора：осуществлятьForth_Like_Compiler_CLI.py



